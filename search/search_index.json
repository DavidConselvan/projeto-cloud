{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Web Scraping com API REST: Docker e AWS","text":""},{"location":"#nome-do-aluno","title":"Nome do Aluno","text":"<p>Nome: David Matheus Seixas Conselvan</p>"},{"location":"#overview-do-projeto","title":"Overview do Projeto","text":"<p>Este projeto consiste em uma aplica\u00e7\u00e3o de scraping para extrair dados de fontes espec\u00edficas da web e disponibiliz\u00e1-los por meio de uma API RESTful, sem interface gr\u00e1fica, constru\u00edda utilizando FastAPI e PostgreSQL. A arquitetura \u00e9 baseada em cont\u00eaineres para garantir portabilidade e facilidade de execu\u00e7\u00e3o, com as imagens hospedadas no Docker Hub.</p> <p>A aplica\u00e7\u00e3o foi implantada na AWS utilizando o Elastic Kubernetes Service (EKS), uma ferramenta gerenciada para execu\u00e7\u00e3o do Kubernetes. O Kubernetes automatiza a implanta\u00e7\u00e3o, o dimensionamento e a gest\u00e3o de aplica\u00e7\u00f5es em cont\u00eaineres. No ambiente EKS, dois pods foram criados:</p> <ul> <li>Um para a aplica\u00e7\u00e3o FastAPI.</li> <li>Outro para o banco de dados PostgreSQL.</li> </ul> <p>A comunica\u00e7\u00e3o entre os pods foi configurada para que a aplica\u00e7\u00e3o possa acessar o banco de dados e realizar as opera\u00e7\u00f5es descritas. O uso do EKS garante escalabilidade, resili\u00eancia e gest\u00e3o eficiente da aplica\u00e7\u00e3o em produ\u00e7\u00e3o.</p>"},{"location":"#a-api-oferece-tres-endpoints-principais","title":"A API oferece tr\u00eas endpoints principais:","text":"<ul> <li>Registro de usu\u00e1rio: Permite criar novos usu\u00e1rios e devolve um token JWT para autentica\u00e7\u00e3o.</li> <li>Login: Permite que usu\u00e1rios registrados fa\u00e7am login e obtenham o mesmo token JWT.</li> <li>Consulta de dados externos: Acessa dados di\u00e1rios do mercado financeiro de uma API externa, exigindo autentica\u00e7\u00e3o com o token JWT.</li> </ul>"},{"location":"#repositorios","title":"Reposit\u00f3rios","text":"<ul> <li>Github </li> <li>Docker Hub</li> </ul>"},{"location":"#documentacao-aplicacoes","title":"Documenta\u00e7\u00e3o Aplica\u00e7\u00f5es:","text":"<p>Aplica\u00e7\u00e3o Local Aplica\u00e7\u00e3o AWS</p>"},{"location":"aws/","title":"Implanta\u00e7\u00e3o da Aplica\u00e7\u00e3o FastAPI no AWS EKS","text":"<p>Este tutorial mostra o processo de implanta\u00e7\u00e3o de uma aplica\u00e7\u00e3o FastAPI integrada a um banco de dados PostgreSQL no Amazon Elastic Kubernetes Service (EKS). A aplica\u00e7\u00e3o utiliza o Kubernetes para orquestra\u00e7\u00e3o, automatizando o deploy, o escalonamento e a gest\u00e3o de workloads em cont\u00eaineres. Ao final, a aplica\u00e7\u00e3o estar\u00e1 rodando na AWS, acess\u00edvel atrav\u00e9s de um endpoint p\u00fablico.</p>"},{"location":"aws/#a-aplicacao-esta-disponivel-em","title":"A aplica\u00e7\u00e3o est\u00e1 dispon\u00edvel em:","text":"<p>App</p>"},{"location":"aws/#implantacao-pelo-aws-cloudshell","title":"Implanta\u00e7\u00e3o pelo AWS CloudShell","text":""},{"location":"aws/#passo-0-baixar-o-eksctl-no-cloudshell-na-versao-unix","title":"Passo 0: Baixar o Eksctl no CloudShell na vers\u00e3o UNIX","text":"<ul> <li>Rode os comandos abaixo: <pre><code># for ARM systems, set ARCH to: `arm64`, `armv6` or `armv7`\nARCH=amd64\nPLATFORM=$(uname -s)_$ARCH\n\ncurl -sLO \"https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_$PLATFORM.tar.gz\"\n\n# (Optional) Verify checksum\ncurl -sL \"https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_checksums.txt\" | grep $PLATFORM | sha256sum --check\n\ntar -xzf eksctl_$PLATFORM.tar.gz -C /tmp &amp;&amp; rm eksctl_$PLATFORM.tar.gz\n\nsudo mv /tmp/eksctl /usr/local/bin\n</code></pre></li> </ul>"},{"location":"aws/#passo-1-criar-o-cluster-eks","title":"Passo 1: Criar o Cluster EKS","text":"<ul> <li>Primeiro, crie um cluster EKS para hospedar sua aplica\u00e7\u00e3o e banco de dados.</li> </ul> <pre><code>eksctl create cluster --name projeto-cloud-cluster --region us-east-2 --nodes 2\n</code></pre> <ul> <li> <p>Explica\u00e7\u00e3o:</p> <ul> <li>name: Nome do cluster (cloud-project-cluster).</li> <li>region: Regi\u00e3o AWS onde o cluster ser\u00e1 criado (us-east-2, Ohio).</li> <li>nodes: Quantidade de n\u00f3s no cluster. Aqui utilizamos 2 n\u00f3s para balancear a carga.</li> </ul> </li> </ul>"},{"location":"aws/#passo-2-configurar-o-kubectl-para-usar-o-cluster-eks","title":"Passo 2: Configurar o kubectl para Usar o Cluster EKS","text":"<ul> <li>Atualize a configura\u00e7\u00e3o do Kubernetes local para apontar para o cluster EKS rec\u00e9m-criado:</li> </ul> <pre><code>aws eks --region us-east-2 update-kubeconfig --name projeto-cloud-cluster\n</code></pre> <ul> <li> <p>Explica\u00e7\u00e3o:</p> <ul> <li>region: Regi\u00e3o AWS onde o cluster foi criado.</li> <li>update-kubeconfig: Atualiza a configura\u00e7\u00e3o do kubectl para conectar-se ao cluster EKS.</li> <li>name: Nome do cluster. </li> </ul> </li> <li> <p>Teste a conex\u00e3o listando os n\u00f3s do cluster:</p> </li> </ul> <pre><code>kubectl get nodes\n</code></pre> <p>Voc\u00ea deve ver a lista de n\u00f3s no cluster.</p>"},{"location":"aws/#passo-3-definir-o-deployment-da-aplicacao","title":"Passo 3: Definir o Deployment da Aplica\u00e7\u00e3o","text":"<ul> <li>Crie um arquivo de deployment (app-deployment.yml) para a aplica\u00e7\u00e3o FastAPI:</li> </ul> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: fastapi-app\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: fastapi\n  template:\n    metadata:\n      labels:\n        app: fastapi\n    spec:\n      containers:\n        - name: fastapi\n          image: davidconselvan/projeto-cloud:latest\n          ports:\n            - containerPort: 8000\n          env:\n            - name: DATABASE_URL\n              value: \"postgresql://projeto:projeto@postgres:5432/projeto\"\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: fastapi-service\nspec:\n  type: LoadBalancer\n  ports:\n    - port: 80\n      targetPort: 8000\n  selector:\n    app: fastapi\n</code></pre> <ul> <li> <p>Explica\u00e7\u00e3o:</p> <ul> <li>Deployment: Define como implantar a aplica\u00e7\u00e3o FastAPI como um pod.</li> <li>Service: Exp\u00f5e a aplica\u00e7\u00e3o usando um LoadBalancer, tornando-a acess\u00edvel pela internet.</li> </ul> </li> </ul>"},{"location":"aws/#passo-4-definir-o-deployment-do-banco-de-dados","title":"Passo 4: Definir o Deployment do Banco de Dados","text":"<ul> <li>Crie um arquivo de deployment (db-deployment.yml) para o banco de dados PostgreSQL:</li> </ul> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: postgres-db-cloud\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: postgres\n  template:\n    metadata:\n      labels:\n        app: postgres\n    spec:\n      containers:\n        - name: postgres\n          image: postgres:17\n          ports:\n            - containerPort: 5432\n          env:\n            - name: POSTGRES_USER\n              value: \"projeto\"\n            - name: POSTGRES_PASSWORD\n              value: \"projeto\"\n            - name: POSTGRES_DB\n              value: \"projeto\"\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: postgres\nspec:\n  ports:\n    - port: 5432\n  selector:\n    app: postgres\n</code></pre> <ul> <li> <p>Explica\u00e7\u00e3o:</p> <ul> <li>Deployment: Configura um pod para o banco de dados PostgreSQL.</li> <li>Service: Exp\u00f5e o banco de dados internamente dentro do cluster Kubernetes.</li> </ul> </li> </ul>"},{"location":"aws/#passo-5-aplicar-os-recursos-no-cluster","title":"Passo 5: Aplicar os Recursos no Cluster","text":"<ul> <li>Aplique os arquivos de configura\u00e7\u00e3o no cluster Kubernetes:</li> </ul> <pre><code>kubectl apply -f app-deployment.yml\nkubectl apply -f db-deployment.yml\n</code></pre> <ul> <li> <p>Explica\u00e7\u00e3o:</p> <ul> <li>kubectl apply: Aplica as configura\u00e7\u00f5es YAML no cluster, criando os recursos definidos (pods, servi\u00e7os, etc.).</li> </ul> </li> </ul>"},{"location":"aws/#verifique-se-os-pods-estao-rodando","title":"Verifique se os pods est\u00e3o rodando:","text":"<pre><code>kubectl get pods\n</code></pre>"},{"location":"aws/#passo-6-acessar-a-aplicacao","title":"Passo 6: Acessar a Aplica\u00e7\u00e3o","text":"<ul> <li>Depois que os servi\u00e7os estiverem ativos, recupere o IP externo do servi\u00e7o FastAPI:</li> </ul> <pre><code>kubectl get svc fastapi-service\n</code></pre> <ul> <li>O comando retornar\u00e1 o EXTERNAL-IP do servi\u00e7o. Use este IP para acessar sua aplica\u00e7\u00e3o em um navegador ou cliente de API.</li> </ul>"},{"location":"docker/","title":"Docker","text":""},{"location":"docker/#como-executar-a-aplicacao","title":"Como Executar a Aplica\u00e7\u00e3o","text":"<ol> <li> <p>Pr\u00e9-requisitos:</p> <ul> <li>Docker e Docker Compose instalados</li> </ul> </li> <li> <p>Passos para execu\u00e7\u00e3o:</p> <ul> <li> <p>Baixe o arquivo compose.yaml: compose.yaml </p> </li> <li> <p>Rode o container:     Com o Docker ativo, execute o docker compose  dentro da pasta onde o arquivo compose.yaml foi baixado:</p> </li> </ul> <pre><code>docker compose up\n</code></pre> <ul> <li>Acesse o Swagger (FastAPI) para testar os endpoints da API, em:</li> </ul> <pre><code>http://localhost:8000/docs#\n</code></pre> <ul> <li>Quando terminar, pare o container usando:  </li> </ul> <pre><code>docker compose down\n</code></pre> </li> </ol>"},{"location":"docker/#documentacao-dos-endpoints-da-api","title":"Documenta\u00e7\u00e3o dos Endpoints da API","text":""},{"location":"docker/#post-registrar","title":"POST /registrar","text":"<ul> <li> <p>Descri\u00e7\u00e3o: Registra um novo usu\u00e1rio e retorna seu token de autentica\u00e7\u00e3o</p> </li> <li> <p>Exemplo de Body da Requisi\u00e7\u00e3o:  </p> <ul> <li>Insira os dados necess\u00e1rios no seguinte formato:   <pre><code>{\n  \"email\": \"joaosilva@gmail.com\",\n  \"name\": \"Jo\u00e3o da Silva\",\n  \"password\": \"12345678\"\n}\n</code></pre></li> </ul> </li> <li> <p>Exemplo de Resposta:   <pre><code>{\n  \"jwt\": \"token_autenticacao\"\n}\n</code></pre></p> </li> <li> <p>Copie e guarde o token gerado!</p> </li> <li> <p>Teste Registrar:</p> </li> </ul> <p></p>"},{"location":"docker/#post-login","title":"POST /login","text":"<ul> <li> <p>Descri\u00e7\u00e3o: Verifica credenciais de usu\u00e1rio e retorna seu token de autentica\u00e7\u00e3o</p> </li> <li> <p>Exemplo de Body da Requisi\u00e7\u00e3o:  </p> <ul> <li>Insira seus dados no seguinte formato:   <pre><code>{\n  \"email\": \"joaosilva@gmail.com\",\n  \"password\": \"12345678\"\n}\n</code></pre></li> </ul> </li> <li> <p>Exemplo de Resposta:   <pre><code>{\n  \"jwt\": \"token_autenticacao\"\n}\n</code></pre></p> </li> <li> <p>Copie e guarde o token gerado!</p> </li> <li> <p>Teste Login:</p> </li> </ul> <p></p> <p>\ud83d\udca1 Aten\u00e7\u00e3o!</p> <p>O token JWT gerado \u00e9 v\u00e1lido por apenas 30 minutos. Ap\u00f3s esse per\u00edodo ser\u00e1 necess\u00e1rio logar novamente e gerar outro token.</p>"},{"location":"docker/#get-consultar","title":"GET /consultar","text":"<ul> <li> <p>Descri\u00e7\u00e3o: Verifica se o usu\u00e1rio est\u00e1 autenticado e ent\u00e3o consulta e devolve dados externos que cont\u00e9m as principais informa\u00e7\u00f5es di\u00e1rias de mercado </p> </li> <li> <p>Autentica\u00e7\u00e3o:  Fa\u00e7a a autentica\u00e7\u00e3o clicando no cadeado no canto direito do endpoint, depois insira seu token JWT obtido anteriormente e clique em \"Authorize\"</p> </li> <li> <p>Uma vez autenticado, execute a requisi\u00e7\u00e3o</p> </li> <li> <p>Exemplo de Resposta:   <pre><code>{\n  \"data\": {\n    \"id\": \"0\",\n    \"type\": \"day_watch\",\n    \"attributes\": {\n      \"top_gainers\": [\n        {\n          \"id\": 606232,\n          \"slug\": \"ROOT\",\n          \"name\": \"Root, Inc.\"\n        },\n        {\n          \"id\": 3251,\n          \"slug\": \"ATEC\",\n          \"name\": \"Alphatec Holdings, Inc.\"\n        },\n        ...\n      ]\n    }     \n    ...\n  }\n  ...\n}\n</code></pre></p> </li> <li> <p>Teste Consulta </p> <ul> <li>Autentica\u00e7\u00e3o:</li> </ul> <p></p> <ul> <li>Resposta:</li> </ul> <p></p> </li> </ul>"},{"location":"docker/#video-de-execucao-da-api","title":"Video de execu\u00e7\u00e3o da API","text":""}]}